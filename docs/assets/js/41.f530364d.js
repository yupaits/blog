(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{280:function(s,t,a){"use strict";a.r(t);var n=a(0),e=Object(n.a)({},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"content"},[s._m(0),s._v(" "),a("blockquote",[a("p",[s._v("引用自"),a("a",{attrs:{href:"http://www.itmuch.com/docker/22-docker-compose-yml-commands/",target:"_blank",rel:"noopener noreferrer"}},[s._v("《Docker系列教程22-docker-compose.yml常用命令》- 周立"),a("OutboundLink")],1)])]),s._v(" "),a("p",[s._v("docker-compose.yml是Compose的默认模板文件。该文件有多种写法，例如Version 1 file format、Version 2 file format、Version 2.1 file format、Version 3 file format等。其中，Version 1 file format将逐步被被弃用；Version 2.x及Version 3.x基本兼容，是未来的趋势。考虑到目前业界的使用情况，本节只讨论Version 2 file format下的常用命令。")]),s._v(" "),s._m(1),s._v(" "),a("p",[s._v("配置构建时的选项，Compose会利用它自动构建镜像。build的值可以是一个路径，例如：")]),s._v(" "),s._m(2),a("p",[s._v("也可以是一个对象，用于指定Dockerfile和参数，例如：")]),s._v(" "),s._m(3),s._m(4),s._v(" "),a("p",[s._v("覆盖容器启动后默认执行的命令。示例：")]),s._v(" "),s._m(5),a("p",[s._v("也可以是一个list，类似于Dockerfile中的CMD指令，格式如下：")]),s._v(" "),s._m(6),s._m(7),s._v(" "),a("p",[s._v("配置dns服务器。可以是一个值，也可以是一个列表。示例：")]),s._v(" "),s._m(8),s._m(9),s._v(" "),a("p",[s._v("配置DNS的搜索域名，可以是一个值，也可以是一个列表。示例：")]),s._v(" "),s._m(10),s._m(11),s._v(" "),a("p",[s._v("环境变量设置，可使用数组或字典两种方式。示例：")]),s._v(" "),s._m(12),s._m(13),s._v(" "),s._m(14),s._v(" "),s._m(15),s._m(16),s._v(" "),a("p",[s._v("暴露端口，只将端口暴露给连接的服务，而不暴露给宿主机。示例：")]),s._v(" "),s._m(17),s._m(18),s._v(" "),a("p",[s._v("连接到docker-compose.yml外部的容器，甚至并非Compose管理的容器，特别是提供共享或公共服务的容器。格式跟links类似，例如：")]),s._v(" "),s._m(19),s._m(20),s._v(" "),a("p",[s._v("指定镜像名称或镜像id，如果本地不存在该镜像，Compose会尝试下载该镜像。")]),s._v(" "),a("p",[s._v("示例：")]),s._v(" "),s._m(21),s._m(22),s._v(" "),s._m(23),s._v(" "),s._m(24),s._m(25),s._v(" "),a("p",[s._v("详见本书《Docker Compose网络设置》一节。")]),s._v(" "),s._m(26),s._v(" "),a("p",[s._v("设置网络模式。示例：")]),s._v(" "),s._m(27),s._m(28),s._v(" "),s._m(29),s._v(" "),s._m(30),s._v(" "),s._m(31),s._m(32),s._v(" "),s._m(33),s._v(" "),s._m(34),s._m(35),s._v(" "),a("p",[s._v("从另一个服务或容器挂载卷。可指定只读（ro）或读写（rw），默认是读写（rw）。示例：")]),s._v(" "),s._m(36),a("p",[a("strong",[s._v("TIPS")]),s._v("\ndocker-compose.yml还有很多其他命令，比如depends_on、pid、devices等。限于篇幅，笔者仅挑选常用的命令进行讲解，其他命令不作赘述。感兴趣的读者们可参考官方文档："),a("a",{attrs:{href:"https://docs.docker.com/compose/compose-file/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://docs.docker.com/compose/compose-file/"),a("OutboundLink")],1),s._v(" 。")])])},[function(){var s=this.$createElement,t=this._self._c||s;return t("h1",{attrs:{id:"docker-compose-yml命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-yml命令","aria-hidden":"true"}},[this._v("#")]),this._v(" docker-compose.yml命令")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"_1-build"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-build","aria-hidden":"true"}},[this._v("#")]),this._v(" (1) build")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{attrs:{class:"token key atrule"}},[this._v("build")]),t("span",{attrs:{class:"token punctuation"}},[this._v(":")]),this._v(" ./dir\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[s._v("build")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{attrs:{class:"token key atrule"}},[s._v("context")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ./dir\n  "),a("span",{attrs:{class:"token key atrule"}},[s._v("dockerfile")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" Dockerfile"),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v("alternate\n  "),a("span",{attrs:{class:"token key atrule"}},[s._v("args")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{attrs:{class:"token key atrule"}},[s._v("buildno")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("1")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"_2-command"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-command","aria-hidden":"true"}},[this._v("#")]),this._v(" (2) command")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{attrs:{class:"token key atrule"}},[this._v("command")]),t("span",{attrs:{class:"token punctuation"}},[this._v(":")]),this._v(" bundle exec thin "),t("span",{attrs:{class:"token punctuation"}},[this._v("-")]),this._v("p 3000\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[s._v("command")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("[")]),s._v("bundle"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" exec"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" thin"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v("p"),a("span",{attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{attrs:{class:"token number"}},[s._v("3000")]),a("span",{attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"_3-dns"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-dns","aria-hidden":"true"}},[this._v("#")]),this._v(" (3) dns")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[s._v("dns")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 8.8.8.8\n"),a("span",{attrs:{class:"token key atrule"}},[s._v("dns")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" 8.8.8.8\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" 9.9.9.9\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"_4-dns-search"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-dns-search","aria-hidden":"true"}},[this._v("#")]),this._v(" (4) dns_search")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[s._v("dns_search")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" example.com\n"),a("span",{attrs:{class:"token key atrule"}},[s._v("dns_search")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" dc1.example.com\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" dc2.example.com\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"_5-environment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-environment","aria-hidden":"true"}},[this._v("#")]),this._v(" (5) environment")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[s._v("environment")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{attrs:{class:"token key atrule"}},[s._v("RACK_ENV")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" development\n  "),a("span",{attrs:{class:"token key atrule"}},[s._v("SHOW")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v("'true'")]),s._v("\n  "),a("span",{attrs:{class:"token key atrule"}},[s._v("SESSION_SECRET")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),a("span",{attrs:{class:"token key atrule"}},[s._v("environment")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" RACK_ENV=development\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" SHOW=true\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" SESSION_SECRET\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"_6-env-file"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-env-file","aria-hidden":"true"}},[this._v("#")]),this._v(" (6) env_file")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("从文件中获取环境变量，可指定一个文件路径或路径列表。如果通过 "),t("code",[this._v("docker-compose -f FILE")]),this._v(" 指定了Compose文件，那么env_file中的路径是Compose文件所在目录的相对路径。使用environment指定的环境变量会覆盖env_file指定的环境变量。示例：")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[s._v("env_file")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" .env\n"),a("span",{attrs:{class:"token key atrule"}},[s._v("env_file")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./common.env   "),a("span",{attrs:{class:"token comment"}},[s._v("# 共用")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./apps/web.env "),a("span",{attrs:{class:"token comment"}},[s._v("# web用")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" /opt/secrets.env "),a("span",{attrs:{class:"token comment"}},[s._v("# 密码用")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"_7-expose"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-expose","aria-hidden":"true"}},[this._v("#")]),this._v(" (7) expose")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[s._v("expose")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"3000"')]),s._v("\n "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"8000"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"_8-external-links"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-external-links","aria-hidden":"true"}},[this._v("#")]),this._v(" (8) external_links")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[s._v("external_links")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" redis_1\n "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" project_db_1"),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("mysql\n "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" project_db_1"),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("postgresql\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"_9-image"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-image","aria-hidden":"true"}},[this._v("#")]),this._v(" (9) image")])},function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"language-yaml line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-yaml"}},[t("code",[t("span",{attrs:{class:"token key atrule"}},[this._v("image")]),t("span",{attrs:{class:"token punctuation"}},[this._v(":")]),this._v(" java\n")])]),this._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[this._v("1")]),t("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"_10-links"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-links","aria-hidden":"true"}},[this._v("#")]),this._v(" (10) links")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("连接到其他服务的容器。可以指定服务名称和服务别名（ "),t("code",[this._v("SERVICE:ALIAS")]),this._v(" ），也可只指定服务名称。例如：")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[s._v("web")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{attrs:{class:"token key atrule"}},[s._v("links")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n   "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" db\n   "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" db"),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("database\n   "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" redis\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"_11-networks"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-networks","aria-hidden":"true"}},[this._v("#")]),this._v(" (11) networks")])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"_12-network-mode"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_12-network-mode","aria-hidden":"true"}},[this._v("#")]),this._v(" (12) network_mode")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[s._v("network_mode")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"bridge"')]),s._v("\n"),a("span",{attrs:{class:"token key atrule"}},[s._v("network_mode")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"host"')]),s._v("\n"),a("span",{attrs:{class:"token key atrule"}},[s._v("network_mode")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"none"')]),s._v("\n"),a("span",{attrs:{class:"token key atrule"}},[s._v("network_mode")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"service:[service name]"')]),s._v("\n"),a("span",{attrs:{class:"token key atrule"}},[s._v("network_mode")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"container:[container name/id]"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"_13-ports"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_13-ports","aria-hidden":"true"}},[this._v("#")]),this._v(" (13) ports")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("暴露端口信息，可使用 "),t("code",[this._v("HOST:CONTAINER")]),this._v(" 的格式，也可只指定容器端口（此时宿主机将会随机选择端口），类似于 "),t("code",[this._v("docker run -p")]),this._v("。")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("需要注意的是，当使用 "),t("code",[this._v("HOST:CONTAINER")]),this._v(" 格式映射端口时，容器端口小于60将会得到错误的接口，因为yaml会把 "),t("code",[this._v("xx:yy")]),this._v(" 的数字解析为60进制。因此，建议使用字符串的形式。示例：")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[s._v("ports")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"3000"')]),s._v("\n "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"3000-3005"')]),s._v("\n "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"8000:8000"')]),s._v("\n "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"9090-9091:8080-8081"')]),s._v("\n "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"49100:22"')]),s._v("\n "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"127.0.0.1:8001:8001"')]),s._v("\n "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{attrs:{class:"token string"}},[s._v('"127.0.0.1:5000-5010:5000-5010"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"_14-volumes"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_14-volumes","aria-hidden":"true"}},[this._v("#")]),this._v(" (14) volumes")])},function(){var s=this.$createElement,t=this._self._c||s;return t("p",[this._v("卷挂载路径设置。可以设置宿主机路径 （"),t("code",[this._v("HOST:CONTAINER")]),this._v("） ，也可指定访问模式 （"),t("code",[this._v("HOST:CONTAINER:ro")]),this._v("）。示例：")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[s._v("volumes")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n  "),a("span",{attrs:{class:"token comment"}},[s._v("# Just specify a path and let the Engine create a volume")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" /var/lib/mysql\n  "),a("span",{attrs:{class:"token comment"}},[s._v("# Specify an absolute path mapping")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" /opt/data"),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/var/lib/mysql\n  "),a("span",{attrs:{class:"token comment"}},[s._v("# Path on the host, relative to the Compose file")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ./cache"),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/tmp/cache\n  "),a("span",{attrs:{class:"token comment"}},[s._v("# User-relative path")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" ~/configs"),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/etc/configs/"),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("ro\n  "),a("span",{attrs:{class:"token comment"}},[s._v("# Named volume")]),s._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" datavolume"),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/var/lib/mysql\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])])},function(){var s=this.$createElement,t=this._self._c||s;return t("h2",{attrs:{id:"_15-volumes-from"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_15-volumes-from","aria-hidden":"true"}},[this._v("#")]),this._v(" (15) volumes_from")])},function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"language-yaml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{attrs:{class:"token key atrule"}},[s._v("volumes_from")]),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" service_name\n "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" service_name"),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("ro\n "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" container"),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("container_name\n "),a("span",{attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" container"),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("container_name"),a("span",{attrs:{class:"token punctuation"}},[s._v(":")]),s._v("rw\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])}],!1,null,null,null);e.options.__file="4.md";t.default=e.exports}}]);